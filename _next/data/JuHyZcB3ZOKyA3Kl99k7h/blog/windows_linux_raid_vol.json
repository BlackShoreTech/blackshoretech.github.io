{"pageProps":{"frontmatter":{"title":"Mounting Windows Raid Volume on Linux","date":"Jun 9, 2020","excerpt":"","author":"Brendan","cover_image":"https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp&w=1920&q=75"},"slug":"windows_linux_raid_vol","content":"#### Estimated time: 5 mins\n\nMy current PC setup includes 2 SSD’s, one for my Linux (Manjaro) installation and one for windows 10, I then have 2 spinning disks in raid 0 that I use for mass storage and backups etc. I switch between Linux and Windows regularly and need access to the drives on each system. \n\n### 1. Map Storage devices devices\nThe first thing you need to do is get the operating system to recognise the raid pair as one single drive (single UUID)\n```bash\nsudo pacman -S libldm\n# On ubuntu\nsudo apt-get install ldmtool\n```\n### 2. Create device-mapper devices for all volumes\nCopy the name if the drive (ldm_vol...) as you'll need it. \n```bash\nsudo ldmtool create all\n[\n  \"ldm_vol_DESKTOP-XXXXXX-Dg0_Volume1\"\n]\n```\nCool so now I have a storage device that's recognised by the operating system\n\n### 3. Mount Volume\n```bash\nsudo mkdir -p /mnt/DATA\nsudo mount /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 /mnt/DATA \n```\nThis works, but every time I restart my machine I'm going to have to do this again. so lets make it permanent. \n\n### 4. Create a systemd service config for ldmtool\n```bash\nsudo vim /etc/systemd/system/ldmtool.service \n```\n```\n[Unit]\nDescription=Windows Dynamic Disk Mount\nAfter=local-fs-pre.target\nBefore=local-fs.target\nDefaultDependencies=no\n\n[Service]\nType=simple\nUser=root\nExecStart=/usr/bin/ldmtool create all\n\n[Install]\nWantedBy=local-fs.target\nEnable the service\n```\n### 5. Enable the service so that it runs after each reboot. \n```sh\nsudo systemctl enable ldmtool.service\n```\n### 6. Add file system to `fstab`\n```bash\nsudo vim /etc/fstab\n```\nAppend to the bottom of the file\n```\n# Mount Windows raid Directory\n/dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1   /mnt/DATA   ntfs  rw,noatime      0 0\n```\nAnd I’m done. Just reboot the PC to confirm it works.\n\nAlternatively, you can reference the drive using the UUID which is recommended by some people but i couldn't say exactly why that is. to do this you’ll need to find the UUID of the drive.\n```bash\nlsblk -o NAME,UUID   /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1\n                                                                                                                             \nNAME                                UUID\nldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 D26C43A96C438767\n```\nWith this information the entry in the /etc/fstab will be.\n```\n# Mount Windows raid Directory\nUUID=D26C43A96C438767           /mnt/DATA       ntfs    rw,noatime      0 0\n```"},"__N_SSG":true}