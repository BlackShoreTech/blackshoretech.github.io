<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" href="/favicon.ico"/><title>Mounting Windows Raid Volume on Linux</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@brsc2909"/><meta name="twitter:creator" content="@brsc2909"/><meta property="og:title" content="Mounting Windows Raid Volume on Linux"/><meta property="og:image" content="https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp&amp;w=1920&amp;q=75"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="BlackShore Technology"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/8a3ba562bb627056.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8a3ba562bb627056.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9569c9e0e72e78a3.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-e1a26ccba1e059ae.js" defer=""></script><script src="/_next/static/chunks/pages/_app-46193ce66c80104f.js" defer=""></script><script src="/_next/static/chunks/672-a3b45081abb2e7a4.js" defer=""></script><script src="/_next/static/chunks/441-77e562cc26b53af2.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-df22efd518924fb4.js" defer=""></script><script src="/_next/static/rDeO_eLjisNVPdeMygS0E/_buildManifest.js" defer=""></script><script src="/_next/static/rDeO_eLjisNVPdeMygS0E/_ssgManifest.js" defer=""></script><style id="__jsx-4057204961">.navbar.jsx-4057204961 li:not(:first-child){margin-top:0;}.navbar.jsx-4057204961 li:not(:last-child){margin-right:1.25rem;}</style></head><body><div id="__next"><div><div class="bg-gray-900"><div class="max-w-screen-lg mx-auto px-3 py-3 undefined"><div class="jsx-4057204961 flex flex-wrap justify-between items-center"><div class="jsx-4057204961"><a href="/"><span class="text-gray-100 inline-flex items-center font-semibold text-xl"><svg clip-rule="evenodd" fill-rule="evenodd" width="32" height="32" image-rendering="optimizeQuality" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" viewBox="0 0 110.99997 120.00004" version="1.1" id="svg68" xmlns="http://www.w3.org/2000/svg"><defs id="defs58"><linearGradient gradientUnits="userSpaceOnUse" id="a" x1="87.309998" x2="7662.6299" y1="3022.4099" y2="14087.64"><stop offset="0" stop-color="#004790" id="stop53"></stop><stop offset="1" stop-color="#1297e0" id="stop55"></stop></linearGradient></defs><g id="g66" transform="scale(0.008,0.0077)"><path d="M 6348.16,5590.89 8916.54,7073.7 10687.81,6051.09 V 3085.38 L 5343.87,0 3127.55,1279.53 8471.59,4364.91 Z" fill="#0067b0" id="path60"></path><path d="M 7912.25,7653.67 0,3085.38 V 6051.09 L 8536.06,10979.42 5343.87,12822.36 0,9736.98 v 2604.18 l 5343.87,3085.29 5343.94,-3085.29 v -3085.1 z" fill="url(#a)" id="path62"></path><path d="M 8471.59,4364.91 10687.81,3085.38 7791.94,3972.5 Z" fill="#003780" id="path64"></path></g></svg></span></a></div><nav class="jsx-4057204961"><ul class="jsx-4057204961 navbar flex items-center font-medium text-xl text-gray-300"><li><a href="/about/">About us</a></li><li><a>Services</a></li><li><a href="/blog/">Blog</a></li></ul></nav></div></div></div><div class="max-w-screen-lg mx-auto px-3 py-8 prose prose-slate"><div class="mb-12 text-center"><h2 class="text-4xl text-gray-900 font-bold">Mounting Windows Raid Volume on Linux</h2></div><article><img src="https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp&amp;w=1920&amp;q=75" alt="Mounting Windows Raid Volume on Linux"/><div>Jun 9, 2020</div><div><h4 id="estimated-time-5-mins">Estimated time: 5 mins</h4>
<p>My current PC setup includes 2 SSD’s, one for my Linux (Manjaro) installation and one for windows 10, I then have 2 spinning disks in raid 0 that I use for mass storage and backups etc. I switch between Linux and Windows regularly and need access to the drives on each system. </p>
<h3 id="1-map-storage-devices-devices">1. Map Storage devices devices</h3>
<p>The first thing you need to do is get the operating system to recognise the raid pair as one single drive (single UUID)</p>
<pre><code class="language-bash">sudo pacman -S libldm
# On ubuntu
sudo apt-get install ldmtool
</code></pre>
<h3 id="2-create-device-mapper-devices-for-all-volumes">2. Create device-mapper devices for all volumes</h3>
<p>Copy the name if the drive (ldm_vol...) as you&#39;ll need it. </p>
<pre><code class="language-bash">sudo ldmtool create all
[
  &quot;ldm_vol_DESKTOP-XXXXXX-Dg0_Volume1&quot;
]
</code></pre>
<p>Cool so now I have a storage device that&#39;s recognised by the operating system</p>
<h3 id="3-mount-volume">3. Mount Volume</h3>
<pre><code class="language-bash">sudo mkdir -p /mnt/DATA
sudo mount /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 /mnt/DATA 
</code></pre>
<p>This works, but every time I restart my machine I&#39;m going to have to do this again. so lets make it permanent. </p>
<h3 id="4-create-a-systemd-service-config-for-ldmtool">4. Create a systemd service config for ldmtool</h3>
<pre><code class="language-bash">sudo vim /etc/systemd/system/ldmtool.service 
</code></pre>
<pre><code>[Unit]
Description=Windows Dynamic Disk Mount
After=local-fs-pre.target
Before=local-fs.target
DefaultDependencies=no

[Service]
Type=simple
User=root
ExecStart=/usr/bin/ldmtool create all

[Install]
WantedBy=local-fs.target
Enable the service
</code></pre>
<h3 id="5-enable-the-service-so-that-it-runs-after-each-reboot">5. Enable the service so that it runs after each reboot.</h3>
<pre><code class="language-sh">sudo systemctl enable ldmtool.service
</code></pre>
<h3 id="6-add-file-system-to-fstab">6. Add file system to <code>fstab</code></h3>
<pre><code class="language-bash">sudo vim /etc/fstab
</code></pre>
<p>Append to the bottom of the file</p>
<pre><code># Mount Windows raid Directory
/dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1   /mnt/DATA   ntfs  rw,noatime      0 0
</code></pre>
<p>And I’m done. Just reboot the PC to confirm it works.</p>
<p>Alternatively, you can reference the drive using the UUID which is recommended by some people but i couldn&#39;t say exactly why that is. to do this you’ll need to find the UUID of the drive.</p>
<pre><code class="language-bash">lsblk -o NAME,UUID   /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1
                                                                                                                             
NAME                                UUID
ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 D26C43A96C438767
</code></pre>
<p>With this information the entry in the /etc/fstab will be.</p>
<pre><code># Mount Windows raid Directory
UUID=D26C43A96C438767           /mnt/DATA       ntfs    rw,noatime      0 0
</code></pre>
</div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Mounting Windows Raid Volume on Linux","date":"Jun 9, 2020","excerpt":"","author":"Brendan","cover_image":"https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp\u0026w=1920\u0026q=75"},"slug":"windows_linux_raid_vol","content":"#### Estimated time: 5 mins\n\nMy current PC setup includes 2 SSD’s, one for my Linux (Manjaro) installation and one for windows 10, I then have 2 spinning disks in raid 0 that I use for mass storage and backups etc. I switch between Linux and Windows regularly and need access to the drives on each system. \n\n### 1. Map Storage devices devices\nThe first thing you need to do is get the operating system to recognise the raid pair as one single drive (single UUID)\n```bash\nsudo pacman -S libldm\n# On ubuntu\nsudo apt-get install ldmtool\n```\n### 2. Create device-mapper devices for all volumes\nCopy the name if the drive (ldm_vol...) as you'll need it. \n```bash\nsudo ldmtool create all\n[\n  \"ldm_vol_DESKTOP-XXXXXX-Dg0_Volume1\"\n]\n```\nCool so now I have a storage device that's recognised by the operating system\n\n### 3. Mount Volume\n```bash\nsudo mkdir -p /mnt/DATA\nsudo mount /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 /mnt/DATA \n```\nThis works, but every time I restart my machine I'm going to have to do this again. so lets make it permanent. \n\n### 4. Create a systemd service config for ldmtool\n```bash\nsudo vim /etc/systemd/system/ldmtool.service \n```\n```\n[Unit]\nDescription=Windows Dynamic Disk Mount\nAfter=local-fs-pre.target\nBefore=local-fs.target\nDefaultDependencies=no\n\n[Service]\nType=simple\nUser=root\nExecStart=/usr/bin/ldmtool create all\n\n[Install]\nWantedBy=local-fs.target\nEnable the service\n```\n### 5. Enable the service so that it runs after each reboot. \n```sh\nsudo systemctl enable ldmtool.service\n```\n### 6. Add file system to `fstab`\n```bash\nsudo vim /etc/fstab\n```\nAppend to the bottom of the file\n```\n# Mount Windows raid Directory\n/dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1   /mnt/DATA   ntfs  rw,noatime      0 0\n```\nAnd I’m done. Just reboot the PC to confirm it works.\n\nAlternatively, you can reference the drive using the UUID which is recommended by some people but i couldn't say exactly why that is. to do this you’ll need to find the UUID of the drive.\n```bash\nlsblk -o NAME,UUID   /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1\n                                                                                                                             \nNAME                                UUID\nldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 D26C43A96C438767\n```\nWith this information the entry in the /etc/fstab will be.\n```\n# Mount Windows raid Directory\nUUID=D26C43A96C438767           /mnt/DATA       ntfs    rw,noatime      0 0\n```"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"windows_linux_raid_vol"},"buildId":"rDeO_eLjisNVPdeMygS0E","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>