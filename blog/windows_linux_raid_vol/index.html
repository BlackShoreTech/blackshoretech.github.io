<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" href="/favicon.ico"/><title>Mounting Windows Raid Volume on Linux</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@brsc2909"/><meta name="twitter:creator" content="@brsc2909"/><meta property="og:title" content="Mounting Windows Raid Volume on Linux"/><meta property="og:image" content="https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp&amp;w=1920&amp;q=75"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="BlackShore Technology"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/c3c0da5d94ce10bc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c3c0da5d94ce10bc.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3a9bfc944125c85f.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-e1a26ccba1e059ae.js" defer=""></script><script src="/_next/static/chunks/pages/_app-78cbf056b3129735.js" defer=""></script><script src="/_next/static/chunks/26-1417d807f586a6be.js" defer=""></script><script src="/_next/static/chunks/802-59f4a325ed34c08d.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-af52a4799ed64b5e.js" defer=""></script><script src="/_next/static/JuHyZcB3ZOKyA3Kl99k7h/_buildManifest.js" defer=""></script><script src="/_next/static/JuHyZcB3ZOKyA3Kl99k7h/_ssgManifest.js" defer=""></script><style id="__jsx-4057204961">.navbar.jsx-4057204961 li:not(:first-child){margin-top:0;}.navbar.jsx-4057204961 li:not(:last-child){margin-right:1.25rem;}</style><style id="__jsx-386846369">.footer-icon-list.jsx-386846369 a:not(:last-child){margin-right:.75rem;}.footer-icon-list.jsx-386846369 a{--tw-text-opacity:1;color:rgb(160 174 192/var(--tw-text-opacity));}.footer-icon-list.jsx-386846369 a:hover{--tw-text-opacity:1;color:rgb(74 85 104/var(--tw-text-opacity));}.footer-icon-list.jsx-386846369 svg{fill:currentColor;height:1.25rem;width:1.25rem;}</style><style id="__jsx-3513251595">.footer-copyright.jsx-3513251595 a{--tw-text-opacity:1;color:rgb(3 169 244/var(--tw-text-opacity));}.footer-copyright.jsx-3513251595 a:hover{-webkit-text-decoration-line:underline;-webkit-text-decoration-line:underline;text-decoration-line:underline;}</style><style id="__jsx-541721229">.navbar.jsx-541721229 li{margin-left:1rem;margin-right:1rem;}</style></head><body><div id="__next"><div class="flex flex-col min-h-screen antialiased text-gray-600"><header class="h-14 bg-gray-900"><nav class="jsx-4057204961 bg-gray-900/80 backdrop-blur-sm flex flex-wrap border-b-gray-800 border-b justify-between items-center px-8 py-2 drop-shadow-lg fixed w-full z-10"><div class="jsx-4057204961"><a href="/"><span class="text-gray-100 inline-flex items-center font-semibold text-xl"><svg clip-rule="evenodd" fill-rule="evenodd" width="32" height="32" image-rendering="optimizeQuality" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" viewBox="0 0 110.99997 120.00004" version="1.1" id="svg68" xmlns="http://www.w3.org/2000/svg"><defs id="defs58"><linearGradient gradientUnits="userSpaceOnUse" id="a" x1="87.309998" x2="7662.6299" y1="3022.4099" y2="14087.64"><stop offset="0" stop-color="#004790" id="stop53"></stop><stop offset="1" stop-color="#1297e0" id="stop55"></stop></linearGradient></defs><g id="g66" transform="scale(0.008,0.0077)"><path d="M 6348.16,5590.89 8916.54,7073.7 10687.81,6051.09 V 3085.38 L 5343.87,0 3127.55,1279.53 8471.59,4364.91 Z" fill="#0067b0" id="path60"></path><path d="M 7912.25,7653.67 0,3085.38 V 6051.09 L 8536.06,10979.42 5343.87,12822.36 0,9736.98 v 2604.18 l 5343.87,3085.29 5343.94,-3085.29 v -3085.1 z" fill="url(#a)" id="path62"></path><path d="M 8471.59,4364.91 10687.81,3085.38 7791.94,3972.5 Z" fill="#003780" id="path64"></path></g></svg></span></a></div><ul class="jsx-4057204961 navbar flex items-center font-medium text-xl text-gray-300"><li class="jsx-4057204961"><a href="/">Home</a></li><li class="jsx-4057204961"><a href="/about/">About us</a></li><li class="jsx-4057204961"><a class="jsx-4057204961">Services</a></li><li class="jsx-4057204961"><a href="/blog/">Blog</a></li></ul></nav></header><main class="grow"><section class="max-w-screen-lg mx-auto px-3 py-8 prose prose-slate"><div class="mb-12 text-center"><h2 class="text-4xl text-gray-900 font-bold">Mounting Windows Raid Volume on Linux</h2></div><article><img src="https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp&amp;w=1920&amp;q=75" alt="Mounting Windows Raid Volume on Linux"/><div>Jun 9, 2020</div><div><h4 id="estimated-time-5-mins">Estimated time: 5 mins</h4>
<p>My current PC setup includes 2 SSD’s, one for my Linux (Manjaro) installation and one for windows 10, I then have 2 spinning disks in raid 0 that I use for mass storage and backups etc. I switch between Linux and Windows regularly and need access to the drives on each system. </p>
<h3 id="1-map-storage-devices-devices">1. Map Storage devices devices</h3>
<p>The first thing you need to do is get the operating system to recognise the raid pair as one single drive (single UUID)</p>
<pre><code class="language-bash">sudo pacman -S libldm
# On ubuntu
sudo apt-get install ldmtool
</code></pre>
<h3 id="2-create-device-mapper-devices-for-all-volumes">2. Create device-mapper devices for all volumes</h3>
<p>Copy the name if the drive (ldm_vol...) as you&#39;ll need it. </p>
<pre><code class="language-bash">sudo ldmtool create all
[
  &quot;ldm_vol_DESKTOP-XXXXXX-Dg0_Volume1&quot;
]
</code></pre>
<p>Cool so now I have a storage device that&#39;s recognised by the operating system</p>
<h3 id="3-mount-volume">3. Mount Volume</h3>
<pre><code class="language-bash">sudo mkdir -p /mnt/DATA
sudo mount /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 /mnt/DATA 
</code></pre>
<p>This works, but every time I restart my machine I&#39;m going to have to do this again. so lets make it permanent. </p>
<h3 id="4-create-a-systemd-service-config-for-ldmtool">4. Create a systemd service config for ldmtool</h3>
<pre><code class="language-bash">sudo vim /etc/systemd/system/ldmtool.service 
</code></pre>
<pre><code>[Unit]
Description=Windows Dynamic Disk Mount
After=local-fs-pre.target
Before=local-fs.target
DefaultDependencies=no

[Service]
Type=simple
User=root
ExecStart=/usr/bin/ldmtool create all

[Install]
WantedBy=local-fs.target
Enable the service
</code></pre>
<h3 id="5-enable-the-service-so-that-it-runs-after-each-reboot">5. Enable the service so that it runs after each reboot.</h3>
<pre><code class="language-sh">sudo systemctl enable ldmtool.service
</code></pre>
<h3 id="6-add-file-system-to-fstab">6. Add file system to <code>fstab</code></h3>
<pre><code class="language-bash">sudo vim /etc/fstab
</code></pre>
<p>Append to the bottom of the file</p>
<pre><code># Mount Windows raid Directory
/dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1   /mnt/DATA   ntfs  rw,noatime      0 0
</code></pre>
<p>And I’m done. Just reboot the PC to confirm it works.</p>
<p>Alternatively, you can reference the drive using the UUID which is recommended by some people but i couldn&#39;t say exactly why that is. to do this you’ll need to find the UUID of the drive.</p>
<pre><code class="language-bash">lsblk -o NAME,UUID   /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1
                                                                                                                             
NAME                                UUID
ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 D26C43A96C438767
</code></pre>
<p>With this information the entry in the /etc/fstab will be.</p>
<pre><code># Mount Windows raid Directory
UUID=D26C43A96C438767           /mnt/DATA       ntfs    rw,noatime      0 0
</code></pre>
</div></article></section></main><footer><footer class="bg-gray-200 py-6"><div class="jsx-541721229 text-center"><span class="text-gray-100 inline-flex items-center font-semibold text-xl"><svg clip-rule="evenodd" fill-rule="evenodd" width="32" height="32" image-rendering="optimizeQuality" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" viewBox="0 0 110.99997 120.00004" version="1.1" id="svg68" xmlns="http://www.w3.org/2000/svg"><defs id="defs58"><linearGradient gradientUnits="userSpaceOnUse" id="a" x1="87.309998" x2="7662.6299" y1="3022.4099" y2="14087.64"><stop offset="0" stop-color="#004790" id="stop53"></stop><stop offset="1" stop-color="#1297e0" id="stop55"></stop></linearGradient></defs><g id="g66" transform="scale(0.008,0.0077)"><path d="M 6348.16,5590.89 8916.54,7073.7 10687.81,6051.09 V 3085.38 L 5343.87,0 3127.55,1279.53 8471.59,4364.91 Z" fill="#0067b0" id="path60"></path><path d="M 7912.25,7653.67 0,3085.38 V 6051.09 L 8536.06,10979.42 5343.87,12822.36 0,9736.98 v 2604.18 l 5343.87,3085.29 5343.94,-3085.29 v -3085.1 z" fill="url(#a)" id="path62"></path><path d="M 8471.59,4364.91 10687.81,3085.38 7791.94,3972.5 Z" fill="#003780" id="path64"></path></g></svg></span><nav class="jsx-541721229"><ul class="jsx-541721229 navbar mt-5 flex flex-row justify-center font-medium text-xl text-gray-800"><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="https://github.com/blackshoretech/">GitHub</a></li></ul></nav><div class="jsx-541721229 mt-8 flex justify-center"><div class="jsx-386846369 footer-icon-list flex flex-wrap"><a href="/"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="/"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.998 12c0-6.628-5.372-12-11.999-12C5.372 0 0 5.372 0 12c0 5.988 4.388 10.952 10.124 11.852v-8.384H7.078v-3.469h3.046V9.356c0-3.008 1.792-4.669 4.532-4.669 1.313 0 2.686.234 2.686.234v2.953H15.83c-1.49 0-1.955.925-1.955 1.874V12h3.328l-.532 3.469h-2.796v8.384c5.736-.9 10.124-5.864 10.124-11.853z"></path></svg></a><a href="/"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.954 4.569a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.691 8.094 4.066 6.13 1.64 3.161a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.061a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.937 4.937 0 004.604 3.417 9.868 9.868 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 002.46-2.548l-.047-.02z"></path></svg></a><a href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.495 6.205a3.007 3.007 0 00-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 00.527 6.205a31.247 31.247 0 00-.522 5.805 31.247 31.247 0 00.522 5.783 3.007 3.007 0 002.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 002.088-2.088 31.247 31.247 0 00.5-5.783 31.247 31.247 0 00-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="/"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="/"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.585 5.267c1.834 0 3.558.811 4.824 2.08v.004c0-.609.41-1.068.979-1.068h.145c.891 0 1.073.842 1.073 1.109l.005 9.475c-.063.621.64.941 1.029.543 1.521-1.564 3.342-8.038-.946-11.79-3.996-3.497-9.357-2.921-12.209-.955-3.031 2.091-4.971 6.718-3.086 11.064 2.054 4.74 7.931 6.152 11.424 4.744 1.769-.715 2.586 1.676.749 2.457-2.776 1.184-10.502 1.064-14.11-5.188C-.977 13.521-.847 6.093 5.62 2.245 10.567-.698 17.09.117 21.022 4.224c4.111 4.294 3.872 12.334-.139 15.461-1.816 1.42-4.516.037-4.498-2.031l-.019-.678c-1.265 1.256-2.948 1.988-4.782 1.988-3.625 0-6.813-3.189-6.813-6.812 0-3.659 3.189-6.885 6.814-6.885zm4.561 6.623c-.137-2.653-2.106-4.249-4.484-4.249h-.09c-2.745 0-4.268 2.159-4.268 4.61 0 2.747 1.842 4.481 4.256 4.481 2.693 0 4.464-1.973 4.592-4.306l-.006-.536z"></path></svg></a><a href="/"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415a3.3 3.3 0 013.293 3.295A3.303 3.303 0 013.283 24C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"></path></svg></a></div></div><div class="jsx-541721229 mt-8 text-sm"><div class="jsx-3513251595 footer-copyright">© Copyright <!-- -->2022<!-- --> <!-- -->BlackShore Technology<!-- -->.</div></div></div></footer></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Mounting Windows Raid Volume on Linux","date":"Jun 9, 2020","excerpt":"","author":"Brendan","cover_image":"https://blog.brendanscullion.com/_next/image?url=https%3A%2F%2Fcdn.hashnode.com%2Fres%2Fhashnode%2Fimage%2Funsplash%2FGNyjCePVRs8%2Fupload%2Fv1652106549467%2FmESFQUaRV.jpeg%3Fw%3D1600%26h%3D840%26fit%3Dcrop%26crop%3Dentropy%26auto%3Dcompress%2Cformat%26format%3Dwebp\u0026w=1920\u0026q=75"},"slug":"windows_linux_raid_vol","content":"#### Estimated time: 5 mins\n\nMy current PC setup includes 2 SSD’s, one for my Linux (Manjaro) installation and one for windows 10, I then have 2 spinning disks in raid 0 that I use for mass storage and backups etc. I switch between Linux and Windows regularly and need access to the drives on each system. \n\n### 1. Map Storage devices devices\nThe first thing you need to do is get the operating system to recognise the raid pair as one single drive (single UUID)\n```bash\nsudo pacman -S libldm\n# On ubuntu\nsudo apt-get install ldmtool\n```\n### 2. Create device-mapper devices for all volumes\nCopy the name if the drive (ldm_vol...) as you'll need it. \n```bash\nsudo ldmtool create all\n[\n  \"ldm_vol_DESKTOP-XXXXXX-Dg0_Volume1\"\n]\n```\nCool so now I have a storage device that's recognised by the operating system\n\n### 3. Mount Volume\n```bash\nsudo mkdir -p /mnt/DATA\nsudo mount /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 /mnt/DATA \n```\nThis works, but every time I restart my machine I'm going to have to do this again. so lets make it permanent. \n\n### 4. Create a systemd service config for ldmtool\n```bash\nsudo vim /etc/systemd/system/ldmtool.service \n```\n```\n[Unit]\nDescription=Windows Dynamic Disk Mount\nAfter=local-fs-pre.target\nBefore=local-fs.target\nDefaultDependencies=no\n\n[Service]\nType=simple\nUser=root\nExecStart=/usr/bin/ldmtool create all\n\n[Install]\nWantedBy=local-fs.target\nEnable the service\n```\n### 5. Enable the service so that it runs after each reboot. \n```sh\nsudo systemctl enable ldmtool.service\n```\n### 6. Add file system to `fstab`\n```bash\nsudo vim /etc/fstab\n```\nAppend to the bottom of the file\n```\n# Mount Windows raid Directory\n/dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1   /mnt/DATA   ntfs  rw,noatime      0 0\n```\nAnd I’m done. Just reboot the PC to confirm it works.\n\nAlternatively, you can reference the drive using the UUID which is recommended by some people but i couldn't say exactly why that is. to do this you’ll need to find the UUID of the drive.\n```bash\nlsblk -o NAME,UUID   /dev/mapper/ldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1\n                                                                                                                             \nNAME                                UUID\nldm_vol_DESKTOP-XXXXXXX-Dg0_Volume1 D26C43A96C438767\n```\nWith this information the entry in the /etc/fstab will be.\n```\n# Mount Windows raid Directory\nUUID=D26C43A96C438767           /mnt/DATA       ntfs    rw,noatime      0 0\n```"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"windows_linux_raid_vol"},"buildId":"JuHyZcB3ZOKyA3Kl99k7h","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>